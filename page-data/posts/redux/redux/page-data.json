{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/redux/redux","webpackCompilationHash":"e4a5d846436f167d86c2","result":{"data":{"markdownRemark":{"id":"1c02eb45-f949-51e6-a71e-03387cb743a1","html":"<span class=\"notice\">\n  <em>TIL 내용이므로 잘못된 내용은 댓글 부탁드립니다</em>\n</span>\n<div id=\"toc\">\n<p><strong><img class=\"emoji-icon\" alt=\"emoji-link\" data-icon=\"emoji-link\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAP+Hj8y/AAAAB3RJTUUH4QsFFwYZepoZFwAAA21JREFUOMt1lFtsFHUUxr//zHYue213obFbamutloDaxSigISQYkFrjNSSI9EJ9IWqjkZhoUkVJGhdZO5pGm9IK4QHhQTRIFXwgxqSaWLykamAV02btZaft7navc9vZmb8PKFa6nofz9Ptycr5zIfif+BMcE23Q79SrkSK/uqYqrG0AAFIePw3ep+zXus0Ghrd1Msmfcn5oJ/YCYMvhI6D+uJQ84PCsvhwcZ5Xc2uSDmbqFse1qrJxgGLxflvL7hDn60uLBn04rn9hXrZbMFi0T/uaJlYIhiP64pHSJ00s9b34saietonbil8Y0adNr15+z8+yNOOeXJbVLiC319H++EV8DmEEb0jK3E7ep5+1px3L8AH5zed+2O2HGT23+jpJJ2gQAsJDPBVI8V3QRMP/i3VA8xsu5do1ccTDPpT478cyE5yQAIIjbA0ItDGNJw/UKR+D2/xgpdhB2Pto40xxU75ltYdaZhw7leDxJhnYb67TvlamKf5o+Cr9/VprdR1l7IbnbN2B9as1bGzP3a7Gqic3kq6eNPoFR+x79NnpNMASnPy7lOpUMZUjeGMwlErlL46JFHtIC8qj+eP490YfIlUG5dBYscBS8X5aULn460cs2CHXiRdekAxzNyuzDtH5BIK9UViISC9foxwGwryLjVvr1bnEm2zNyJtTs2Sr4GsYc+QJMq+Ixuja2Kci7I1fDbm0QAMDuRK7D6OXns89Lox3UlKu3iluE9bcWmpj4XfxeszJZcr9DDkMb/tsc0u7lzwrb1BePD2yCFxfJC631b7EtRWM6nRQCVXJ+or82UlTHr5vv0OuZptKc/EUbLgF4hA58+Vqsrt16AKEaQVAWe6eGsmZq2XAZw22LlsKo1/wdBSiNzh0sfOS1q4pEmh/e9R8cYEqLWOIDN928Cs8CAD7ABsb7lPm64LAik4ebjTM3LCdbqa4Oee4TmTvGbP0cNuBu5uc96Xd5H41MhH3qsRXLz263SvlAq/NeUt+YShDhluj+xBucl0b+CAfUkTLHRXYhyu7oXNPH1tAskyJeexVbUPp/P+LW3i97vAQcOMHduiO0Z03I6TFNOf7DhfMXVB0ENiyYMKBDhYYiTNiwCTg44YLI+5qrg540vawUTDAgoLBRQhE6VChQoMGEBZss+x0UAFnxR+iyDOAv/Ud+TW3GONMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMTEtMDVUMTg6NDk6NTArMDA6MDAUXGOwAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTExLTA1VDEzOjUzOjQ4KzAwOjAwqyFlXwAAAABJRU5ErkJggg==\" title=\"emoji-link\">  Table Of Contents</strong></p>\n<ul>\n<li><a href=\"#redux%EB%9E%80\">Redux란?</a></li>\n<li>\n<p><a href=\"#redux%EC%9D%98-3%EA%B0%80%EC%A7%80\">Redux의 3가지</a></p>\n<ul>\n<li><a href=\"#store\">store</a></li>\n<li><a href=\"#action%EA%B3%BC-action-creator\">Action과 Action Creator</a></li>\n<li><a href=\"#reducer\">Reducer</a></li>\n</ul>\n</li>\n<li><a href=\"#%EA%B2%B0%EB%A1%A0\">결론</a></li>\n</ul>\n</div>\n<h2 id=\"redux란\"><a href=\"#redux%EB%9E%80\" aria-label=\"redux란 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Redux란?</h2>\n<p>리덕스는 상태관리 라이브러리이다. 리덕스를 사용하면 컴포넌트들의 상태 관련 로직들을 다른 파일로 분리시켜 효울적으로 관리할 수 있고, 컴포넌트간의 상태를 공유하게 될 때 상위 컴포넌트를 거치지 않고 상태 값을 전달 받을 수 있다.</p>\n<p>만약 간단한 구조의 프로젝트일 경우 상태관리를 보다 수월하게 할 수 있지만,<br>\n규모가 큰 복잡한 프로젝트일 경우 그만큼 컴포넌트가 많아져서 아래의 그림같은 구조를 하고 있다면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 745px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aa019a2fd93de44836a47e4795d23dd5/a1b4d/redux_structor.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHeXV4yAn//xAAZEAACAwEAAAAAAAAAAAAAAAAAAQMQITL/2gAIAQEAAQUCYsZJ1X//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAEAABAhEhYXH/2gAIAQEABj8CVZfYj0//xAAZEAADAQEBAAAAAAAAAAAAAAABETEQIQD/2gAIAQEAAT8hirx8aK3cIhJuv//aAAwDAQACAAMAAAAQ+A//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBFR/9oACAEDAQE/EGgOx//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAECAQE/EKf/xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAxECFBUf/aAAgBAQABPxBpAE9d5NtTwL8vA6gQY71gBonH/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux_structor\"\n        title=\"redux_structor\"\n        src=\"/static/aa019a2fd93de44836a47e4795d23dd5/aa03c/redux_structor.jpg\"\n        srcset=\"/static/aa019a2fd93de44836a47e4795d23dd5/31ba1/redux_structor.jpg 186w,\n/static/aa019a2fd93de44836a47e4795d23dd5/1160a/redux_structor.jpg 373w,\n/static/aa019a2fd93de44836a47e4795d23dd5/aa03c/redux_structor.jpg 745w,\n/static/aa019a2fd93de44836a47e4795d23dd5/a1b4d/redux_structor.jpg 750w\"\n        sizes=\"(max-width: 745px) 100vw, 745px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위 그림과 같이 value값을 필요한 곳으로 전달하기 위해, 해당 value 값을 사용하지 않는 컴포넌트를 거쳐야한다. 이 과정은 굉장히 비효율적이고, 원하는 컴포넌트까지 prop로 내려줘야되기 때문에 코드가 다소 복잡해질 가능성이 높다.</p>\n<p>이러한 문제를 redux로 해결한다면? 아래의 그림과 같을 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 745px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b2a5a9dd5a87acd1bc5c81021defa61e/a1b4d/redux_structor2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHvTyK6RP/EABoQAAICAwAAAAAAAAAAAAAAAAEDACECETH/2gAIAQEAAQUCMB0YzrBS6x//xAAXEQEBAQEAAAAAAAAAAAAAAAABABEh/9oACAEDAQE/AXhsX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAABBxAAIRIf/aAAgBAQAGPwKZ1irP/8QAGxABAAEFAQAAAAAAAAAAAAAAAQAQESExQVH/2gAIAQEAAT8h03adOPWaJLbuCTc7CYZ//9oADAMBAAIAAwAAABC73//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxAwWm3/xAAWEQADAAAAAAAAAAAAAAAAAAABEDH/2gAIAQIBAT8QFX//xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMUFR/9oACAEBAAE/EGkATxzjAM961+XCJRuP0CDHvreflfPMJBCrv//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux_structor2\"\n        title=\"redux_structor2\"\n        src=\"/static/b2a5a9dd5a87acd1bc5c81021defa61e/aa03c/redux_structor2.jpg\"\n        srcset=\"/static/b2a5a9dd5a87acd1bc5c81021defa61e/31ba1/redux_structor2.jpg 186w,\n/static/b2a5a9dd5a87acd1bc5c81021defa61e/1160a/redux_structor2.jpg 373w,\n/static/b2a5a9dd5a87acd1bc5c81021defa61e/aa03c/redux_structor2.jpg 745w,\n/static/b2a5a9dd5a87acd1bc5c81021defa61e/a1b4d/redux_structor2.jpg 750w\"\n        sizes=\"(max-width: 745px) 100vw, 745px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>리덕스를 사용하면 애플리케이션이 지니고 있는 상태와, 상태 변화 로직이 들어있는 스토어를 통하여, 우리가 원하는 컴포넌트에 원하는 상태값과 함수를 다른 상위 컴포넌트를 안 거치고도 직접 주입하여줄 수 있게된다.</p>\n<p>Redux는 엄격한 규칙이 있고, 이러한 규칙을 지키게되면 좀 더 안전하게 상태를 관리할 수 있다.</p>\n<p>사용해보기 앞서 설치를 먼저 해보자</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> redux --save</code></pre></div>\n<p>보통 트리구조는</p>\n<div class=\"gatsby-highlight\" data-language=\"code\"><pre class=\"language-code\"><code class=\"language-code\">src\n└ actions\n└ reducers\n└ components\nApp.js\nindex.js</code></pre></div>\n<p>이런식으로 분류한다</p>\n<h2 id=\"redux의-3가지\"><a href=\"#redux%EC%9D%98-3%EA%B0%80%EC%A7%80\" aria-label=\"redux의 3가지 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Redux의 3가지</h2>\n<h3 id=\"store\"><a href=\"#store\" aria-label=\"store permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Store</h3>\n<p>스토어 안에는 현재의 애플리케이션의 상태, 리듀서가 있고, 몇가지 내장함수가 있다.\n<strong>일반적으로 스토어는 하나의 애플리케이션 당 하나의 스토어를 만든다</strong></p>\n<br>\n<h4 id=\"dispatch\"><a href=\"#dispatch\" aria-label=\"dispatch permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dispatch</h4>\n<p>스토어의 내장함수로서 액션을 발생 시키는 것이라고 생각하면 된다. dispatch라는 함수에는 액션 생성자함수 또는 액션을 파라미터로 전달한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>리듀서<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token punctuation\">:</span> <span class=\"token string\">'ADD_VALUE'</span><span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이런식으로 호출하면 스토어는 리듀서 함수를 실행시켜서 해당 액션을 처리하는 로직이 있다면 액션을 참고하여 새로운 상태를 만들어준다.</p>\n<hr />\n<h4 id=\"subscribe\"><a href=\"#subscribe\" aria-label=\"subscribe permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>subscribe</h4>\n<p>스토어의 내장함수로서 함수 형태의 값을 파라미터로 받아온다. subscribe 함수에 특정 함수를 전달하면, 액션이 디스패치 되었을 때마다 전달해준 함수를 호출한다.\nsubscribe의 리턴으로는 unsubscribe라는 점을 주의해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>리듀서<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> unsubscribe <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// store의 상태가 변할때마다 현재의 상태를 호출</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 구독취소</span></code></pre></div>\n<hr />\n<h4 id=\"getstate\"><a href=\"#getstate\" aria-label=\"getstate permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>getState</h4>\n<p>스토어의 내장함수로서 현재 스토어의 state를 가져올 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>리듀서<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 현재의 state를 리턴</span></code></pre></div>\n<hr />\n<h4 id=\"replacereducer\"><a href=\"#replacereducer\" aria-label=\"replacereducer permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>replaceReducer</h4>\n<p>리듀서를 변경할때 사용한다. 잘 사용하지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">store<span class=\"token punctuation\">.</span><span class=\"token function\">replaceReducer</span><span class=\"token punctuation\">(</span>다른 리듀서<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr class=\"sub\"/>\n<h3 id=\"action과-action-creator\"><a href=\"#action%EA%B3%BC-action-creator\" aria-label=\"action과 action creator permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Action과 Action Creator</h3>\n<p>상태에 어떠한 변화가 필요하게 될때 Action을 발생시키는데, 이는 하나의 객체로 표현된다.</p>\n<p>액션 객체는 다음과 같은 형식을 갖춘다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span>\n  type<span class=\"token punctuation\">:</span> <span class=\"token string\">'ADD_VALUE'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>액션 객체는 type 필드는 필수적으로 가지고 있어야하고</strong>, 그외의 값들은 개발자가 해당 변화가 필요한 값들로 넣어줄 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span>\n  type<span class=\"token punctuation\">:</span> <span class=\"token string\">'ADD_VALUE'</span><span class=\"token punctuation\">,</span>\n  data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    value<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>하지만 매번 Action type명을 문자열로 쓰는 것은 반복적인 것을 싫어하는 개발자 입장에선 귀찮은 일이다. 이걸 좀 더 유지보수하기 쉽게 하기위해선 상수와 함수를 사용해서 쓰는 것이 일반적이다. 보통 외부 파일에서 참조할 수 있으니 export해주는 것이 좋다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">ADD_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ADD_VALUE'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addValue</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token punctuation\">:</span> <span class=\"token constant\">ADD_VALUE</span><span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이때 addValue 함수를 Action Creator라 한다. Action 함수는 단순히 파라미터를 받아와서 액션 객체 형태로 만들어 리턴해주는 역할을 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 745px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5592980eb10b87bc921304ce4f43b311/a1b4d/redux_creator.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3pAD/8QAFhABAQEAAAAAAAAAAAAAAAAAAQAC/9oACAEBAAEFAoGwJn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAMQERIf/aAAgBAQAGPwJjNmz/xAAYEAEBAQEBAAAAAAAAAAAAAAABEQBRkf/aAAgBAQABPyGNXxhWtwIV9d//2gAMAwEAAgADAAAAEHff/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREA/9oACAEDAQE/EBmWtd//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAYEAEAAwEAAAAAAAAAAAAAAAABABEhMf/aAAgBAQABPxANiR5QyEaUos5BDBctZ//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux_creator\"\n        title=\"redux_creator\"\n        src=\"/static/5592980eb10b87bc921304ce4f43b311/aa03c/redux_creator.jpg\"\n        srcset=\"/static/5592980eb10b87bc921304ce4f43b311/31ba1/redux_creator.jpg 186w,\n/static/5592980eb10b87bc921304ce4f43b311/1160a/redux_creator.jpg 373w,\n/static/5592980eb10b87bc921304ce4f43b311/aa03c/redux_creator.jpg 745w,\n/static/5592980eb10b87bc921304ce4f43b311/a1b4d/redux_creator.jpg 750w\"\n        sizes=\"(max-width: 745px) 100vw, 745px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<hr class=\"sub\" />\n<h3 id=\"reducer\"><a href=\"#reducer\" aria-label=\"reducer permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reducer</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 745px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84b9ab6d6ce0fe147cbd9e4a7fc3c078/a1b4d/redux_reducer.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd2ANoT/xAAXEAADAQAAAAAAAAAAAAAAAAABAhEQ/9oACAEBAAEFAoaqkZ//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAAQACECEx/9oACAEBAAY/AtVvJj//xAAaEAACAgMAAAAAAAAAAAAAAAAAARExIVGB/9oACAEBAAE/IVIddD99FCwrk//aAAwDAQACAAMAAAAQeA//xAAVEQEBAAAAAAAAAAAAAAAAAAAREP/aAAgBAwEBPxBBP//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EIf/xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhMVFh/9oACAEBAAE/EAOSjFNRsNSgAr2FoUus/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux_reducer\"\n        title=\"redux_reducer\"\n        src=\"/static/84b9ab6d6ce0fe147cbd9e4a7fc3c078/aa03c/redux_reducer.jpg\"\n        srcset=\"/static/84b9ab6d6ce0fe147cbd9e4a7fc3c078/31ba1/redux_reducer.jpg 186w,\n/static/84b9ab6d6ce0fe147cbd9e4a7fc3c078/1160a/redux_reducer.jpg 373w,\n/static/84b9ab6d6ce0fe147cbd9e4a7fc3c078/aa03c/redux_reducer.jpg 745w,\n/static/84b9ab6d6ce0fe147cbd9e4a7fc3c078/a1b4d/redux_reducer.jpg 750w\"\n        sizes=\"(max-width: 745px) 100vw, 745px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>이전의 State와 Action을 합쳐, 새로운 State를 만드는 역할을 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">ADD_VALUE</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./actions'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INITIAL_VALUE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token constant\">INITIAL_VALUE</span><span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">ADD_VALUE</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        value<span class=\"token punctuation\">:</span> state<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+</span> action<span class=\"token punctuation\">.</span>value\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위에서 설명한 Action의 예제를 이어서 생각하면 Action 예제에서 ADD_VALUE라는 상수를 export 해주었다. 그것을 import 받아서 사용해보자.</p>\n<p><strong>주의해야할 점은</strong></p>\n<ol>\n<li>초기상태는 Reducer에 default의 인수에서 정의를 해줘야 한다는 점<br>\n이유는 Redux에서 초기 상태를 만들때 Reducer를 호출하는데 그 시점에 state가 undefined가 되면 초기상태가 원하는대로 만들어지지 않기 때문에 초기 state를 입력해주어야한다.</li>\n<li>상태를 변경할때 state의 그 자체의 값을 변경하는 것이 아니라, 불변성을 지키면서 사용한다는 점</li>\n</ol>\n<blockquote>\n<p><strong>불변성을 지켜야하는 이유?</strong><br>\n값만 바뀌게 되면 매번 상태의 값까지 체크해야되는데, 성능적으로 좋지 않아 좀 더 수월하게 하기위해 Redux는 참조값이 바뀌는 것을 체크하여 상태가 변경되었음을 인지하는 로직으로 구현되어있다.</p>\n</blockquote>\n<br>\n<p>불변성을 지키는 방법은 2가지가 있다.<br></p>\n<ol>\n<li>\n<p>Object.assign을 이용하는 방법</p>\n<blockquote>\n<p>Object.assign(target, …sources)<br>\n열거할 수 있는 하나 이상의 출처 객체로부터 대상 객체로 속성을 복사할 때 사용한다. 대상 객체를 반환한다.</p>\n</blockquote>\n</li>\n<li>스프레드문법</li>\n</ol>\n<br>\n<h4 id=\"combinereducers\"><a href=\"#combinereducers\" aria-label=\"combinereducers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>combineReducers</h4>\n<p>보통 Reducer는 기능별로 파일을 나누는 것이 일반적이다. 이 나누어진 파일들을 사용할때마다 따로따로 import하여 사용하기는 매우 귀찮은 일이고 실수가 분명 나올 것이다.\n이렇게 나뉜 Reducer를 하나로 병합하여 사용할 수 있게 해주는 함수가 combineReducers라는 redux 함수이다.</p>\n<p><b>./reducers/index.js</b></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> combineReducers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> counter <span class=\"token keyword\">from</span> <span class=\"token string\">'./counter'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> doSomething <span class=\"token keyword\">from</span> <span class=\"token string\">'./doSomething'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  counter<span class=\"token punctuation\">,</span>\n  doSomething\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이런식으로 합쳐줄 수 있다.</p>\n<h2 id=\"결론\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>Redux의 개념은 좀 어렵다.<br>\n근데 은행을 빗대어 생각하면 이해하는데 조금은 도움이 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"code\"><pre class=\"language-code\"><code class=\"language-code\">지갑 - React State (체계가 없어, 상태 내역을 알 수가 없다.)\n\n은행 - Redux\n\n통장 - Store의 state\n\n은행원 - Reducer\n\n명세표 - Action</code></pre></div>\n<p>지갑을 React의 state라 비유해보자.</p>\n<p>지갑에 있는 돈은 우리가 마음대로 넣고 뺄 수 있다. 하지만 일종의 체계가 없어 우리가 따로 적어놓지 않는 이상 사용내역을 알기가 어렵다.</p>\n<p>그래서 우리는 은행에가서 통장을 만든다.</p>\n<p>이때 은행은 Redux로 비유할 수 있고, 은행은 엄격한 체계하에 고객의 돈을 관리해준다. Redux도 엄격한 체계가 있어 우리가 관리하기는 조금 어려움이 있더라도, 확실한 상태관리를 할 수 있다.</p>\n<p>우리는 입/출금을 할때 통장을 들고가서 거래명세표를 작성한다.</p>\n<p>이때의 통장은 Redux의 Store의 state로 생각할 수 있고, 명세표는 action이라고 생각할 수 있다.</p>\n<p>그리고 은행원을 Reducer라고 생각해보면,</p>\n<p>우리는 은행원에게 통장(state)과 명세표(action)을 건네주면 기존의 통장의 내역(old state)을 덮어쓰지 않고 새로운 라인에 내역을 새긴 후 새로운 내용(new state)이 담긴 통장을 건네준다(불변성)</p>\n<div class=\"gatsby-highlight\" data-language=\"code\"><pre class=\"language-code\"><code class=\"language-code\">은행원\t\t\t\t\t\t\t   Reducer\n기존 통장, 입/출금 거래명세표\t\t   기존 상태, Action\n\nReturn\t\t\t\t\t\t\t   Return\n새로운 내역이 추가된 통장\t\t\t   새로운 State 객체</code></pre></div>\n<br>\n<br>\n<br>\n<br>","fields":{"slug":"/posts/redux/redux","tagSlugs":["/tag/redux/"]},"frontmatter":{"date":"2020-02-01","description":"Redux에 대해 알아보자","tags":["Redux"],"title":"Redux란?","socialImage":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/redux/redux"}}}